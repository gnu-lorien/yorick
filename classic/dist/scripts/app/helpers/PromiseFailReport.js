define(["jquery","underscore","parse"],function(r,o,e){var i=function(r){if(o.has(r,"message")){if(e.Error.USERNAME_MISSING==r.code)return;if(e.Error.INVALID_LINKED_SESSION==r.code||e.Error.INVALID_SESSION_TOKEN==r.code||e.Error.SESSION_MISSING==r.code||o.startsWith(r.message,"Facebook auth is invalid for this user"))e.User.logOut(),window&&window.location.reload();else{console.info("Error in promise "+JSON.stringify(r));try{o.isUndefined(trackJs)||trackJs.console.error("Error in promise",JSON.stringify(r))}catch(i){throw JSON.stringify(r)}}}else{console.info("Error in promise "+JSON.stringify(r));try{o.isUndefined(trackJs)||trackJs.console.error("Error in promise",JSON.stringify(r))}catch(i){throw JSON.stringify(r)}}},s=function(r){o.isArray(r)?(console.log("Error in a multi-promise follows {"),o.each(r,function(r,e){o.has(r,"success")?console.log(""+e+" succeeded at "+r.updatedAt):i(r)}),console.log("}")):i(r)};return s});