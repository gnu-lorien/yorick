define(["jquery","backbone","text!../templates/choose-user.html","parse"],function(e,t,i,n){var l=t.View.extend({initialize:function(){_.bindAll(this,"render")},register:function(e){var t=this;t.click_template=_.template(e),t.collection=[];var i=new n.Query("User");i.select("id","username","realname","email"),i.each(function(e){t.collection.push(e)}).then(function(){t.render()},function(e){console.log("No users? "+e.message)})},events:{"click .user-listing":"clicked"},clicked:function(t){var i=this;t.preventDefault(),e.mobile.loading("show");var n=e(t.target).attr("backendId");window.location.hash=i.click_template({id:n})},render:function(){var e=this;return this.template=_.template(i)({collection:e.collection}),this.$el.find("div[role='main']").html(this.template),this.$el.enhanceWithin(),this}});return l});