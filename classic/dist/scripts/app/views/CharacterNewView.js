define(["jquery","backbone","../models/Vampire","backform","../models/Werewolf","../models/ChangelingBetaSlice"],function(e,a,t,r,o,i){var l=r.Form.extend({initialize:function(e){r.Form.prototype.initialize.apply(this,arguments),this.redirectRemove=e.redirectRemove||"#characters?all",this.redirectRemove=_.template(this.redirectRemove),this.redirectSave=e.redirectSave||"#character?<%= character.id %>",this.redirectSave=_.template(this.redirectSave)},model:new a.Model({name:"New Character Name",type:"Vampire"}),errorModel:new a.Model,fields:[{name:"name",label:"Character Name",control:"input"},{name:"type",label:"Venue",control:"select",options:[{label:"Vampire",value:"Vampire"},{label:"Werewolf",value:"Werewolf"},{label:"Changeling",value:"ChangelingBetaSlice"}]},{control:"Button",label:"Create New Character"}],events:{submit:"save_clicked"},validate:function(e,a){var t=this;if(t.errorModel.clear(),_.isEmpty(t.model.get("name")))return t.errorModel.set({name:"Name cannot be empty."}),"Validation errors. Please fix."},save_clicked:function(a){var r=this;if(a.preventDefault(),!r.validate())return"Vampire"==r.model.get("type")?(e.mobile.loading("show"),t.create(r.model.get("name")).then(function(e){window.location.hash=r.redirectSave({character:e})},function(e){console.log("Failed to save a character",e.message)})):"Werewolf"==r.model.get("type")?(e.mobile.loading("show"),o.create(r.model.get("name")).then(function(e){window.location.hash=r.redirectSave({character:e})},function(e){console.log("Failed to save a character",e.message)})):(e.mobile.loading("show"),i.create(r.model.get("name")).then(function(e){window.location.hash=r.redirectSave({character:e})},function(e){console.log("Failed to save a character",e.message)})),!1}});return l});