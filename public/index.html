<!doctype html>
<html class="no-js ui-mobile-rendering" lang="en">
<head>
	<title>Backbone.js, Require.js, and jQuery Mobile</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="css/themes/default/jquery.mobile.css">
    <link rel="stylesheet" href="css/printable_sheet.css">
    <script data-main="scripts/app" src="scripts/lib/require.js"></script>
</head>
<body>


<div data-role="header" data-position="fixed" data-theme="a">
    <a href="javascript:window.history.back()" data-icon="arrow-l" data-iconpos="left" data-rel="back" data-transition="slide" data-direction="reverse" id="header-back-button">Back</a>
    <a href="javascript:Parse.User.logOut(); window.location.hash = 'start';" data-icon="minus" data-iconpos="right" data-transition="slide" data-direction="reverse">Log Out</a>
    <h1>Default Title</h1>
</div><!-- /header -->

<div id="splashscreen" data-role="page" data-title="Twisted Vines Splash Screen">
    <div role="main" class="ui-content">
        <img src="VinesLogo.png"/>
    </div>
</div>
<div id="login-or-signup" data-role="page" data-title="Login or Sign Up">
    <div role="main" class="ui-content">
        <ul data-role="listview" data-inset="true" class="ui-listview ui-listview-inset ui-corner-all ui-shadow">
            <li><a href="#characters?all">Characters</a></li>
        </ul>
    </div><!-- /content -->
</div>

<div id="categories" data-role="page" data-title="Categories">
	<div role="main" class="ui-content">
        <ul data-role="listview" data-inset="true" class="ui-listview ui-listview-inset ui-corner-all ui-shadow">
            <li><a href="#characters?all">Characters</a></li>
        </ul>
	</div><!-- /content -->
</div>

<div data-role="footer" data-position="fixed" data-theme="a">
    <div data-role="navbar">
        <ul>
            <li><a href="#characters?all" data-transition="fade">Characters</a></li>
            <li><a href="page-b.html" data-transition="flip">Friends</a></li>
            <li><a href="page-c.html" data-transition="turn">Albums</a></li>
            <li><a href="page-d.html" data-transition="slide">Emails</a></li>
        </ul>
    </div><!-- /navbar -->
</div><!-- /footer -->

<div id="character" data-role="page" data-title="Character">
    <div role="main" class="ui-content">
    </div>
</div>

<script id="characterView" type="text/template">
    <% if (character.is_being_created()) { %>
    <ul data-role="listview" data-inset="true" class="ui-listview ui-listview-inset ui-corner-all ui-shadow">
        <li><a href="#charactercreate/<%= character.id %>">Character Creation</a></li>
    </ul>
    <% } %>
    <ul data-role="listview" data-inset="true" class="ui-listview ui-listview-inset ui-corner-all ui-shadow">
        <li><a href="#simpletraits/skills/<%= character.id %>/all">Skills</a></li>
    </ul>
    <ul data-role="listview" data-inset="true" class="ui-listview ui-listview-inset ui-corner-all ui-shadow">
        <li><a href="#simpletraits/disciplines/<%= character.id %>/all">Disciplines</a></li>
    </ul>
    <ul data-role="listview" data-inset="true" class="ui-listview ui-listview-inset ui-corner-all ui-shadow">
        <li><a href="#simpletraits/techniques/<%= character.id %>/all">Techniques</a></li>
    </ul>
    <ul data-role="listview" data-inset="true" class="ui-listview ui-listview-inset ui-corner-all ui-shadow">
        <li><a href="#simpletraits/elder_disciplines/<%= character.id %>/all">Elder Disciplines</a></li>
    </ul>
    <ul data-role="listview" data-inset="true" class="ui-listview ui-listview-inset ui-corner-all ui-shadow">
        <li><a href="#simpletraits/rituals/<%= character.id %>/all">Rituals</a></li>
    </ul>
    <ul data-role="listview" data-inset="true" class="ui-listview ui-listview-inset ui-corner-all ui-shadow">
        <li><a href="#simpletraits/backgrounds/<%= character.id %>/all">Backgrounds</a></li>
    </ul>
    <ul data-role="listview" data-inset="true" class="ui-listview ui-listview-inset ui-corner-all ui-shadow">
        <li><a href="#simpletraits/haven_specializations/<%= character.id %>/all">Haven Specializations</a></li>
    </ul>
    <ul data-role="listview" data-inset="true" class="ui-listview ui-listview-inset ui-corner-all ui-shadow">
        <li><a href="#simpletraits/lore_specializations/<%= character.id %>/all">Lore Specializations</a></li>
    </ul>
    <ul data-role="listview" data-inset="true" class="ui-listview ui-listview-inset ui-corner-all ui-shadow">
        <li><a href="#character/<%= character.id %>/print">Print</a></li>
    </ul>
    <ul data-role="listview" data-inset="true" class="ui-listview ui-listview-inset ui-corner-all ui-shadow">
        <li><a href="#character/<%= character.id %>/costs">Costs</a></li>
    </ul>
    <ul data-role="listview" data-inset="true" class="ui-listview ui-listview-inset ui-corner-all ui-shadow">
        <li><a href="#character/<%= character.id %>/log">Log</a></li>
    </ul>
</script>

<div id="character-create" data-role="page" data-title="Create Character">

    <div data-role="header">
        <h1>Create Character</h1>
    </div><!-- /header -->

    <div role="main" class="ui-content">
        createodapage
    </div>
</div>

<script id="characterCreateView" type="text/template">
    <% var creation = character.get("creation"); %>

    <p>You have <%= creation.get("initial_xp") %> initial XP to spend</p>
    <p>Remaining steps for <%= character.get("name") %></p>
    <ul data-role="listview" data-inset="true" class="ui-listview ui-listview-inset ui-corner-all ui-shadow">
        <% if (creation.get("clan")) { %>
        <li data-role="list-divider">Clan<p><%= character.get("clan") %></p></li>
        <li><a href="#charactercreate/simpletext/clans/clan/<%= character.id %>/pick">Repick clan</a></li>
        <% } else { %>
        <li><a href="#charactercreate/simpletext/clans/clan/<%= character.id %>/pick">Pick clan</a></li>
        <% } %>
    </ul>

    <ul data-role="listview" data-inset="true" class="ui-listview ui-listview-inset ui-corner-all ui-shadow">
        <% if (creation.get("archetype")) { %>
        <li data-role="list-divider">Archetype<p><%= character.get("archetype") %></p></li>
        <li><a href="#charactercreate/simpletext/archetypes/archetype/<%= character.id %>/pick">Repick Archetype</a></li>
        <% } else { %>
        <li><a href="#charactercreate/simpletext/archetypes/archetype/<%= character.id %>/pick">Pick archetype</a></li>
        <% } %>
    </ul>

    <ul data-role="listview" data-inset="true" class="ui-listview ui-listview-inset ui-corner-all ui-shadow">
        <li data-role="list-divider">Attributes<span class="ui-li-count"><%= creation.remaining_picks("attributes") %></span></li>
        <% _.each(_.range(8, 0, -1), function(i) { %>
        <% var n = "attributes_" + i + "_remaining"; %>
        <% _.each(creation.get("attributes_" + i + "_picks"), function(st) { %>
        <li data-icon="delete"><a href="#charactercreate/simpletraits/attributes/<%= character.id %>/unpick/<%= st.linkId() %>/<%= i %>"><%= st.get("name") %> x<%= st.get("value") %></a></li>
        <% }); %>
        <% _.each(_.range(creation.get(n)), function() { %>
        <li><a href="#charactercreate/simpletraits/attributes/<%= character.id %>/pick/<%= i %>">Pick attribute at rating <%= i %></a></li>
        <% }) %>
        <% }); %>
    </ul>

    <% _.each(_.zip(["Physical", "Social", "Mental"], ["focus_physicals", "focus_socials", "focus_mentals"]), function(z) { %>
    <% var prettyName = z[0]; %>
    <% var category = z[1]; %>
    <ul data-role="listview" data-inset="true" class="ui-listview ui-listview-inset ui-corner-all ui-shadow">
        <li data-role="list-divider"><%= prettyName %> Focus<span class="ui-li-count"><%= creation.remaining_picks(category) %></span></li>
        <% _.each(_.range(2, 0, -1), function(i) { %>
        <% var n = category + "_" + i + "_remaining"; %>
        <% _.each(creation.get(category + "_" + i + "_picks"), function(st) { %>
        <li data-icon="delete"><a href="#charactercreate/simpletraits/<%= category %>/<%= character.id %>/unpick/<%= st.linkId() %>/<%= i %>"><%= st.get("name") %></a></li>
        <% }); %>
        <% _.each(_.range(creation.get(n)), function() { %>
        <li><a href="#charactercreate/simpletraits/<%= category %>/<%= character.id %>/pick/<%= i %>">Pick <%= prettyName %> Focus</a></li>
        <% }) %>
        <% }); %>
    </ul>
    <% }); %>


    <ul data-role="listview" data-inset="true" class="ui-listview ui-listview-inset ui-corner-all ui-shadow">
        <li data-role="list-divider">Skills<span class="ui-li-count"><%= creation.remaining_picks("skills") %></span></li>
        <% _.each(_.range(4, 0, -1), function(i) { %>
            <% var n = "skills_" + i + "_remaining"; %>
            <% _.each(creation.get("skills_" + i + "_picks"), function(st) { %>
                <li data-icon="delete"><a href="#charactercreate/simpletraits/skills/<%= character.id %>/unpick/<%= st.linkId() %>/<%= i %>"><%= st.get("name") %> x<%= st.get("value") %></a></li>
            <% }); %>
            <% _.each(_.range(creation.get(n)), function() { %>
                <li><a href="#charactercreate/simpletraits/skills/<%= character.id %>/pick/<%= i %>">Pick skill at rating <%= i %></a></li>
            <% }) %>
        <% }); %>
    </ul>


    <ul data-role="listview" data-inset="true" class="ui-listview ui-listview-inset ui-corner-all ui-shadow">
        <li data-role="list-divider">Backgrounds<span class="ui-li-count"><%= creation.remaining_picks("backgrounds") %></span></li>
        <% _.each(_.range(3, 0, -1), function(i) { %>
        <% var n = "backgrounds_" + i + "_remaining"; %>
        <% _.each(creation.get("backgrounds_" + i + "_picks"), function(st) { %>
        <li data-icon="delete"><a href="#charactercreate/simpletraits/backgrounds/<%= character.id %>/unpick/<%= st.linkId() %>/<%= i %>"><%= st.get("name") %> x<%= st.get("value") %></a></li>
        <% }); %>
        <% _.each(_.range(creation.get(n)), function() { %>
        <li><a href="#charactercreate/simpletraits/backgrounds/<%= character.id %>/pick/<%= i %>">Pick a background at rating <%= i %></a></li>
        <% }); %>
        <% }); %>
    </ul>

    <ul data-role="listview" data-inset="true" class="ui-listview ui-listview-inset ui-corner-all ui-shadow">
        <li data-role="list-divider">Disciplines<span class="ui-li-count"><%= creation.remaining_picks("disciplines") %></span></li>
        <% _.each(_.range(2, 0, -1), function(i) { %>
            <% var n = "disciplines_" + i + "_remaining"; %>
            <% _.each(creation.get("disciplines_" + i + "_picks"), function(st) { %>
            <li data-icon="delete"><a href="#charactercreate/simpletraits/disciplines/<%= character.id %>/unpick/<%= st.linkId() %>/<%= i %>"><%= st.get("name") %> x<%= st.get("value") %></a></li>
            <% }); %>
            <% _.each(_.range(creation.get(n)), function() { %>
            <li><a href="#charactercreate/simpletraits/disciplines/<%= character.id %>/pick/<%= i %>">Pick in clan discipline at rating <%= i %></a></li>
            <% }); %>
        <% }); %>
    </ul>

    <ul data-role="listview" data-inset="true" class="ui-listview ui-listview-inset ui-corner-all ui-shadow" category="merits">
        <li data-role="list-divider">Merits<span class="ui-li-count"><%= creation.remaining_picks("merits") %></span></li>
        <% _.each(_.range(1, -1, -1), function(i) { %>
        <% var n = "merits_" + i + "_remaining"; %>
        <% _.each(creation.get("merits_" + i + "_picks"), function(st) { %>
        <li data-icon="delete"><a href="#charactercreate/simpletraits/merits/<%= character.id %>/unpick/<%= st.linkId() %>/<%= i %>"><%= st.get("name") %> x<%= st.get("value") %></a></li>
        <% }); %>
        <% _.each(_.range(creation.get(n)), function() { %>
        <li><a href="#charactercreate/simpletraits/merits/<%= character.id %>/pick/<%= i %>">Pick merit</a></li>
        <% }); %>
        <% }); %>
    </ul>

    <ul data-role="listview" data-inset="true" class="ui-listview ui-listview-inset ui-corner-all ui-shadow">
        <li data-role="list-divider">Flaws<span class="ui-li-count"><%= creation.remaining_picks("flaws") %></span></li>
        <% _.each(_.range(1, -1, -1), function(i) { %>
        <% var n = "flaws_" + i + "_remaining"; %>
        <% _.each(creation.get("flaws_" + i + "_picks"), function(st) { %>
        <li data-icon="delete"><a href="#charactercreate/simpletraits/flaws/<%= character.id %>/unpick/<%= st.linkId() %>/<%= i %>"><%= st.get("name") %> x<%= st.get("value") %></a></li>
        <% }); %>
        <% _.each(_.range(creation.get(n)), function() { %>
        <li><a href="#charactercreate/simpletraits/flaws/<%= character.id %>/pick/<%= i %>">Pick flaw</a></li>
        <% }); %>
        <% }); %>
    </ul>

</script>

<div id="characters-all" data-role="page" data-title="All Characters">
    <div data-role="header">
        <h1>Characters</h1>
    </div><!-- /header -->

    <div role="main" class="ui-content">
        <ul>
            <li><a href="#characternew">Add New Vampire</a></li>
        </ul>
        <ul data-role="listview" data-inset="true">
        </ul>
    </div><!-- /content -->
</div>

<div id="simpletraitcategory-all" data-role="page" data-title="SimpleTraitCategoryAll">
    <div data-role="header">
        <h1>Must do the template thing with this too muahahaha</h1>
    </div>

    <div role="main" class="ui-content">
    </div>
</div>

<script id="simpleTraitCategoryView" type="text/template">
    <ul>
        <li><a href="#simpletraits/<%= category %>/<%= character.id %>/new">Add New <%= category %></a></li>
    </ul>
    <ul>
        <% if (character.has(category)) { _.each(character.get(category), function(e) { %>
        <li>
            <a href="#simpletrait/<%= category %>/<%= character.id %>/<%= e.id %>" class="ui-btn ui-btn-icon-right ui-icon-carat-r"><%= e.get("name") %> x<%= e.get("value") %></a>
        </li>
        <% }); } %>
    </ul>
</script>

<div id="simpletrait-change" data-role="page" data-title="SimpleTraitChange">
    <div data-role="header">
        <h1>Simple Trait to Change</h1>
    </div>

    <div role="main" class="ui-content">
    </div>
</div>

<script id="simpleTraitChangeView" type="text/template">
    <p><%= c.get("name") %> <%= b.get("name") %> <%= b.get("value") %></p>
    <p>
        <label for="slider">Slider:</label>
        <input type="range" name="simpleTraitValue" id="slider" value="<%= b.get('value') %>" min="1" max="5">
    </p>
    <p>
        <button class="remove ui-btn">Remove</button>
        <button class="save ui-btn">Save Changes</button>
    </p>
</script>

<div id="victims-all" data-role="page" data-title="VictimsAll">
    <div data-role="header">
        <h1>Victims</h1>
    </div>

    <div role="main" class="ui-content">
        <ul>
            <li>All</li>
            <li>Idle</li>
            <li>Occupied</li>
        </ul>
    </div>
</div>

<div id="animals" data-role="page" data-title="Animals">

      <div data-role="header">
	    <h1>Animals</h1>
      </div><!-- /header -->
  
      <div role="main" class="ui-content">
            <ul data-role="listview" data-inset="true">
            </ul>
      </div><!-- /content -->
</div>

<div id="colors" data-role="page" data-title="Colors">

      <div data-role="header">
	    <h1>Colors</h1>
      </div><!-- /header -->

      <div role="main" class="ui-content">
            <ul data-role="listview" data-inset="true">
            </ul>
      </div><!-- /content -->

</div>

<div id="vehicles" data-role="page" data-title="Vehicles">

      <div data-role="header">
	    <h1>Vehicles</h1>
      </div><!-- /header -->
  
      <div role="main" class="ui-content">
            <ul data-role="listview" data-inset="true">
            </ul>
      </div><!-- /content -->

</div>

<div id="character-new" data-role="page" data-title="New Character">
    <div data-role="header">
        <h1>New Character</h1>
    </div>

    <div role="main" class="ui-content">
    </div>
</div>

<script id="characterNewView" type="text/template">
    <form>
         <label for="characterName">Name:</label>
         <input type="text" name="characterName" id="characterName" value="New Character Name">
    </form>
    <p>
        <button class="cancel ui-btn">Cancel</button>
        <button class="save ui-btn">Save Changes</button>
    </p>
</script>

<script id="characterLinkItems" type="text/template">
    <% collection.each(function(e) { %>
    <li>
        <a href="#character?<%= e.id %>" class="ui-btn ui-btn-icon-right ui-icon-carat-r"><%= e.get("name") %></a>
    </li>
    <% }); %>
</script>

<div id="simpletrait-new" data-role="page" data-title="New Simple Trait">
    <div data-role="header">
        <h1>New Simple Trait</h1>
    </div>

    <div role="main" class="ui-content">
    </div>
</div>

<script id="simpletraitcategoryDescriptionItems" type="text/template">
    <% if (freeValue) { %>
        <p>Pick one for value <%= freeValue %></p>
    <% } %>
    <form class="ui-filterable">
            <input id="filterBasic-input" data-type="search">
    </form>
    <ul data-role="listview" data-filter="true" data-input="#filterBasic-input">
    <% _.each(collection, function(e) { %>
        <li>
            <a name="<%= e.get('name') %>" backendId="<%= e.id %>" href="#" class="ui-btn ui-btn-icon-right ui-icon-carat-r simpletrait">
                <% if (e.has("value")) { %>
                    <%= e.get("name") %> x<%= e.get("value") %>
                <% } else { %>
                    <%= e.get("name") %>
                <% } %>
            </a>
        </li>
    <% }); %>
    </ul>
</script>

<div id="simpletext-new" data-role="page" data-title="New Simple Text">
    <div data-role="header">
        <h1>New Simple Text</h1>
    </div>

    <div role="main" class="ui-content">
    </div>
</div>

<script id="simpletextcategoryDescriptionItems" type="text/template">
    <ul data-role="listview" data-inset="true" data-filter="true">
        <% collection.each(function(e) { %>
        <li>
            <a name="<%= e.get('name') %>"  href="#" class="ui-btn ui-btn-icon-right ui-icon-carat-r"><%= e.get("name") %></a>
        </li>
        <% }); %>
    </ul>
</script>

<!-- Underscore Template that is used to display all of the Category Models -->
<script id="categoryItems" type="text/template">

      <% _.each( collection.toJSON(), function( category, id ) { %>

            <li class="ui-li-static">
                  <%= category.type %>
            </li>

      <% }); %>

</script>

<div id="character-costs" data-role="page" data-title="Character Costs">
    <div data-role="header">
        <h1>Character Costs</h1>
    </div>

    <div role="main" class="ui-content">
    </div>
</div>

<script id="characterCostsView" type="text/template">
    <h1><%= character.get("name") %></h1>

    <% if (!character.generation()) { %>
    <p>Warning: Values are just a guess without a generation set</p>
    <% } %>

    <ul>
        <% _.each(_.values(costs), function(cost) { %>
        <li><%= cost.trait.get("name") %>: <%= cost.cost %></li>
        <% }); %>
    </ul>
</script>

<div id="character-history" data-role="page" data-title="Character History">
    <div data-role="header">
        <h1>Character History</h1>
    </div>

    <div role="main" class="ui-content">
    </div>
</div>

<script id="characterHistoryView" type="text/template">
    <h1><%= character.get("name") %></h1>

    <% if (!character.generation()) { %>
    <p>Warning: Values are just a guess without a generation set</p>
    <% } %>

    <ul>
        <% _.each(_.values(costs), function(cost) { %>
        <li><%= cost.trait.get("name") %>: <%= cost.cost %></li>
        <% }); %>
    </ul>
</script>

<div id="printable-sheet" data-role="page" data-title="Printable Sheet">
    <div data-role="header">
        <h1>Printable Sheet</h1>
    </div>

    <div role="main" class="ui-content">
    </div>
</div>

<script id="characterPrintView" type="text/template">
    <h1><%= character.get("name") %></h1>
    <h2><%= character.get("archetype") %> <%= character.get("clan") %></h2>
    <hr/>
    <% _.each(character.get("attributes"), function (attribute) { %>
    <h1><%= attribute.get("name") %></h1>
    <%= attribute.get("value") %><br/>
    <% var focusName = "focus_" + attribute.get("name").toLowerCase() + "s"; %>
    <% _.each(character.get(focusName), function (focus) { %>
    <%= focus.get("name") %>&nbsp;
    <% }); %>
    <% }); %>

    <h1>Skills</h1>
    <% var cols = []; %>
    <% cols.push(["Academics", "Animal Ken", "Athletics", "Awareness", "Brawl", "Computer", "Crafts", "Dodge", "Drive"]); %>
    <% cols.push(["Empathy", "Firearms", "Intimidation", "Investigation", "Leadership", "Linguistics", "Lore", "Medicine", "Melee", "Occult"]); %>
    <% cols.push(["Performance", "Science", "Security", "Stealth", "Streetwise", "Subterfuge", "Survival"]); %>
    <% var groupedSkills = _.zip.apply(_, cols) %>
    <table>
        <% _.each(groupedSkills, function(three_group) { %>
        <tr>
            <% _.each(three_group, function(skill) { %>
            <td><%= skill %></td><td>x</td><td><%= _.result(skillsLookup, skill + '[0].attributes.value', 0) %></td>
            <% }); %>
        </tr>
        <% }); %>
        <% cols = _.flatten(cols); %>
        <% _.each(character.get("skills"), function (skill) { %>
        <% if (!_.contains(cols, skill.get("name"))) { %>
        <tr><td><%= skill.get("name") %> x<%= skill.get("value") %></td></tr>
        <% } %>
        <% }); %>
    </table>
    <hr/>
    <h1>Backgrounds</h1>
    <table>
        <% _.each(character.get("backgrounds"), function(background) { %>
        <tr><td><%= background.get("name") %>: <%= background.get("value") %></td></tr>
        <% }); %>
    </table>
    <hr/>
    <h1>Disciplines</h1>
    <table>
        <% _.each(character.get("disciplines"), function(d) { %>
        <tr><td><%= d.get("name") %>: <%= d.get("value") %></td></tr>
        <% }); %>
    </table>
    <% _.each(["techniques", "elder_disciplines", "rituals", "haven_specializations", "lore_specializations"], function (category) { %>
    <h1><%= category %></h1>
    <table>
        <% _.each(character.get(category), function(d) { %>
        <tr><td><%= d.get("name") %>: <%= d.get("value") %></td></tr>
        <% }); %>
    </table>
    <% }); %>
</script>

<script type="text/template" id="login-template">
    <div class="login">
        <form class="login-form">
            <h2>Log In</h2>
            <div class="error" style="display:none"></div>
            <input type="text" id="login-username" placeholder="Username" />
            <input type="password" id="login-password" placeholder="Password" />
            <button>Log In</button>
        </form>

        <form class="signup-form">
            <h2>Sign Up</h2>
            <div class="error" style="display:none"></div>
            <input type="text" id="signup-username" placeholder="Username" />
            <input type="password" id="signup-password" placeholder="Create a Password" />
            <button>Sign Up</button>
        </form>
    </div>
</script>

<div id="simpletrait-specialization" data-role="page" data-title="Simple Trait Specialization">
    <div role="main" class="ui-content">
    </div>
</div>

<script id="simpleTraitSpecialization" type="text/template">
    <form>
             <label for="specialization">Specialization for <%= name %>:</label>
             <input type="text" name="specialization" id="specialization" value="<%= specialization %>">
    </form>
    <p>
        <button class="cancel ui-btn">Cancel</button>
        <button class="save ui-btn">Save Changes</button>
    </p>
</script>

</body>
</html>
